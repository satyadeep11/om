
<div class="invite-list-page" [@routerTransition]>
<app-page-header [heading]="'Customer List'" [icon]="'fa-search'"></app-page-header>
  <div class="row justify-content-md-center">
      <div class="col-md-5"> 
      <div *ngIf="myData">
              <div *ngIf="myData.error==false; else inviteerror">
                    <div *ngIf="myData.success_msg; else messagecommon">
                      <ngb-alert type="success" *ngIf="!closed" (close)="closed=true">{{myData.success_msg}}</ngb-alert>    
                    </div>     
                    <ng-template #messagecommon>
                        <ngb-alert type="success" *ngIf="!closed" (close)="closed=true">The Customer List has been generated.</ngb-alert>
                    </ng-template>         
              </div>
              <ng-template #inviteerror>
                      <ngb-alert type="danger" *ngIf="!closed" (close)="closed=true">{{myData.error_msg}}</ngb-alert> 
              </ng-template>
      </div>      
  </div>
  </div>
 
  <div class="row justify-content-md-center">
    
  <div class="col-md-7">        
        <div>  
                <form class="form-inline" #InviteSearch="ngForm" (ngSubmit)="searchlist(InviteSearch.value); InviteSearch.reset() " style="display: -webkit-inline-box;">
                    <input class="form-control" name="email" [(ngModel)]="email" type="text" placeholder="Search using Email" >
                </form> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <button type="button" class="btn btn-info" (click)="inviteList()">Full List</button>&nbsp;
                <button type="button" class="btn btn-info" (click)="pendingList()">Pending Invites</button>&nbsp;
                <button type="button" class="btn btn-info" (click)="acceptedList()">Accepted Customers</button>&nbsp;
        </div>
        <br> <h1 class="row justify-content-md-center">Customer List</h1> <br>

    <!-- HTML table for our list of product records -->
    <table class='table table-hover table-responsive'>

        <tr>
            <th>First name</th>
            <th>Last Name</th>
            <th>Company Name</th>
            <th>Phone Number</th>
            <th>Email</th>
            <th>Actions</th>
        </tr>

        <!-- Use *ngFor directive to loop throught our list of products. -->
        <tr *ngFor="let user of myData?.users">
            <td>{{user.fname}}</td>
            <td>{{user.lname}}</td>
            <td>{{user.company}}</td>
            <td>{{user.phone}}</td>
            <td>{{user.email}}</td>  
            <td id="actions_td">
                    <!-- edit customer button -->
                    
                    <button (click)="updateCustomer(user.unique_id)" class='btn btn-info '>
                         Edit Customer
                    </button>&nbsp;
 
                    <!-- delete customer button -->
                    <button (click)="deleteCustomer(user.unique_id)" class='btn btn-danger '>
                       Delete
                    </button>
            </td>         
        </tr>

    </table>
  </div>
  </div>
</div> 

